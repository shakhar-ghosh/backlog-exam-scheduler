/*!
 * jQuery fancyTable plugin v1.0.32
 * https://github.com/myspace-nu
 *
 * Copyright 2018 Johan Johansson
 * Released under the MIT license
 */

!function(l){l.fn.fancyTable=function(a){var o=l.extend({inputStyle:"",inputPlaceholder:"Search...",pagination:!1,paginationClass:"btn btn-light",paginationClassActive:"active",pagClosest:3,perPage:10,sortable:!0,searchable:!0,matchCase:!1,exactMatch:!1,onInit:function(){},onUpdate:function(){},sortFunction:function(a,t,e,n,r){return a==t&&n&&r?e.rowSortOrder[l(n).data("rowid")]>e.rowSortOrder[l(r).data("rowid")]:"numeric"==e.sortAs[e.sortColumn]?0<e.sortOrder?parseFloat(a)-parseFloat(t):parseFloat(t)-parseFloat(a):a<t?-e.sortOrder:t<a?e.sortOrder:0},testing:!1},a),i=this;return this.settings=o,this.tableUpdate=function(n){if(n.fancyTable.matches=0,l(n).find("tbody tr").each(function(){var a=0,t=!0,e=!1;l(this).find("td").each(function(){o.globalSearch||!n.fancyTable.searchArr[a]||i.isSearchMatch(l(this).html(),n.fancyTable.searchArr[a])?!o.globalSearch||n.fancyTable.search&&!i.isSearchMatch(l(this).html(),n.fancyTable.search)||Array.isArray(o.globalSearchExcludeColumns)&&o.globalSearchExcludeColumns.includes(a+1)||(e=!0):t=!1,a++}),o.globalSearch&&e||!o.globalSearch&&t?(n.fancyTable.matches++,!o.pagination||n.fancyTable.matches>n.fancyTable.perPage*(n.fancyTable.page-1)&&n.fancyTable.matches<=n.fancyTable.perPage*n.fancyTable.page?l(this).show():l(this).hide()):l(this).hide()}),n.fancyTable.pages=Math.ceil(n.fancyTable.matches/n.fancyTable.perPage),o.pagination){var a=n.fancyTable.paginationElement?l(n.fancyTable.paginationElement):l(n).find(".pag");a.empty();for(var t,e=1;e<=n.fancyTable.pages;e++)(1==e||e>n.fancyTable.page-(o.pagClosest+1)&&e<n.fancyTable.page+(o.pagClosest+1)||e==n.fancyTable.pages)&&(t=l("<a>",{html:e,"data-n":e,style:"margin:0.2em",class:o.paginationClass+" "+(e==n.fancyTable.page?o.paginationClassActive:"")}).css("cursor","pointer").bind("click",function(){n.fancyTable.page=l(this).data("n"),i.tableUpdate(n)}),e==n.fancyTable.pages&&n.fancyTable.page<n.fancyTable.pages-o.pagClosest-1&&a.append(l("<span>...</span>")),a.append(t),1==e&&n.fancyTable.page>o.pagClosest+2&&a.append(l("<span>...</span>")))}o.onUpdate.call(this,n)},this.isSearchMatch=function(a,t){if(o.matchCase||(a=a.toUpperCase(),t=t.toUpperCase()),"auto"==o.exactMatch&&t.match(/^".*?"$/))return a==(t=t.substring(1,t.length-1));if("auto"==o.exactMatch&&t.replace(/\s+/g,"").match(/^[<>]=?/)){var e=t.replace(/\s+/g,"").match(/^[<>]=?/)[0],n=t.replace(/\s+/g,"").substring(e.length);return">"==e&&+n<+a||"<"==e&&+a<+n||">="==e&&+n<=+a||"<="==e&&+a<=+n}if("auto"==o.exactMatch&&t.replace(/\s+/g,"").match(/^.+(\.\.|-).+$/)){n=t.replace(/\s+/g,"").split(/\.\.|-/);return+a>=+n[0]&&+a<=+n[1]}try{return!0===o.exactMatch?a==t:new RegExp(t).test(a)}catch{return!1}},this.reinit=function(){l(this).each(function(){l(this).find("th a").contents().unwrap(),l(this).find("tr.fancySearchRow").remove()}),l(this).fancyTable(this.settings)},this.tableSort=function(r){var a,t;void 0!==r.fancyTable.sortColumn&&r.fancyTable.sortColumn<r.fancyTable.nColumns&&(a=0,l(r).find("thead th").each(function(){l(this).attr("aria-sort",a==r.fancyTable.sortColumn?1==r.fancyTable.sortOrder?"ascending":-1==r.fancyTable.sortOrder?"descending":"other":null),a++}),l(r).find("thead th div.sortArrow").each(function(){l(this).remove()}),(t=l("<div>",{class:"sortArrow"}).css({margin:"0.1em",display:"inline-block",width:0,height:0,"border-left":"0.4em solid transparent","border-right":"0.4em solid transparent"})).css(0<r.fancyTable.sortOrder?{"border-top":"0.4em solid #000"}:{"border-bottom":"0.4em solid #000"}),l(r).find("thead th a").eq(r.fancyTable.sortColumn).append(t),t=l(r).find("tbody tr").toArray().sort(function(a,t){var e=l(a).find("td").eq(r.fancyTable.sortColumn),n=l(t).find("td").eq(r.fancyTable.sortColumn),e=l(e).attr("data-sortvalue")?l(e).data("sortvalue"):e.html(),n=l(n).attr("data-sortvalue")?l(n).data("sortvalue"):n.html();return"case-insensitive"==r.fancyTable.sortAs[r.fancyTable.sortColumn]&&(e=e.toLowerCase(),n=n.toLowerCase()),o.sortFunction.call(this,e,n,r.fancyTable,a,t)}),l(t).each(function(a){r.fancyTable.rowSortOrder[l(this).data("rowid")]=a}),l(r).find("tbody").empty().append(t))},this.each(function(){if("TABLE"!==l(this).prop("tagName"))return console.warn("fancyTable: Element is not a table."),!0;var t,e,a,n,r,s=this;s.fancyTable={nColumns:l(s).find("td").first().parent().find("td").length,nRows:l(this).find("tbody tr").length,perPage:o.perPage,page:1,pages:0,matches:0,searchArr:[],search:"",sortColumn:o.sortColumn,sortOrder:void 0!==o.sortOrder&&(new RegExp("desc","i").test(o.sortOrder)||-1==o.sortOrder)?-1:1,sortAs:[],paginationElement:o.paginationElement},s.fancyTable.rowSortOrder=new Array(s.fancyTable.nRows),0==l(s).find("tbody").length&&(n=l(s).html(),l(s).empty(),l(s).append("<tbody>").append(l(n))),0==l(s).find("thead").length&&l(s).prepend(l("<thead>")),l(s).find("tbody tr").each(function(a){l(this).data("rowid",a)}),o.sortable&&(t=0,l(s).find("thead th").each(function(){s.fancyTable.sortAs.push("numeric"==l(this).data("sortas")?"numeric":"case-insensitive"==l(this).data("sortas")?"case-insensitive":null);var a=l(this).html(),a=l("<a>",{href:"#","aria-label":"Sort by "+l(this).text(),html:a,"data-n":t,class:""}).css({cursor:"pointer",color:"inherit","text-decoration":"none","white-space":"nowrap"}).bind("click",function(){return s.fancyTable.sortColumn==l(this).data("n")?s.fancyTable.sortOrder=-s.fancyTable.sortOrder:s.fancyTable.sortOrder=1,s.fancyTable.sortColumn=l(this).data("n"),i.tableSort(s),i.tableUpdate(s),!1});l(this).empty(),l(this).append(a),t++})),o.searchable&&(e=l("<tr>").addClass("fancySearchRow"),o.globalSearch?(a=l("<input>",{"aria-label":"Search table",placeholder:o.inputPlaceholder,style:"width:100%;box-sizing:border-box;"+o.inputStyle}).bind("change paste keyup",function(){s.fancyTable.search=l(this).val(),s.fancyTable.page=1,i.tableUpdate(s)}),n=l("<th>",{style:"padding:2px;"}).attr("colspan",s.fancyTable.nColumns),l(a).appendTo(l(n)),l(n).appendTo(l(e))):(r=0,l(s).find("td").first().parent().find("td").each(function(){s.fancyTable.searchArr.push("");var a=l("<input>",{"aria-label":"Search column","data-n":r,placeholder:o.inputPlaceholder,style:"width:100%;box-sizing:border-box;"+o.inputStyle}).bind("change paste keyup",function(){s.fancyTable.searchArr[l(this).data("n")]=l(this).val(),s.fancyTable.page=1,i.tableUpdate(s)}),t=l("<th>",{style:"padding:2px;"});l(a).appendTo(l(t)),l(t).appendTo(l(e)),r++})),e.appendTo(l(s).find("thead"))),i.tableSort(s),o.pagination&&!o.paginationElement&&(l(s).find("tfoot").remove(),l(s).append(l("<tfoot><tr></tr></tfoot>")),l(s).find("tfoot tr").append(l("<td class='pag'></td>",{}).attr("colspan",s.fancyTable.nColumns))),i.tableUpdate(s),o.onInit.call(this,s)}),this}}(jQuery);